# myRPC-server ‚Äî –¥–µ–º–æ–Ω –¥–ª—è —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥

`myRPC-server` ‚Äî —ç—Ç–æ —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–∏—Å—Ç–µ–º—ã `myRPC`, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è –ø—Ä–∏—ë–º–∞ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (TCP –∏–ª–∏ UDP), –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON. –û—Ç–≤–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É —Ç–∞–∫–∂–µ –≤ –≤–∏–¥–µ JSON.

---

## ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- üìñ –ß—Ç–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ `/etc/myRPC/myRPC.conf`
- üë• –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —Å–ø–∏—Å–∫—É –∏–∑ `/etc/myRPC/users.conf`
- üîå –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–∫ TCP (`stream`), —Ç–∞–∫ –∏ UDP (`dgram`) —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É `mysyslog`
- üêö –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `sh -c`
- üì§ –û—Ç–≤–µ—Ç –∫–ª–∏–µ–Ω—Ç—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON (—É—Å–ø–µ—Ö –∏–ª–∏ –æ—à–∏–±–∫–∞)

---

## üì• –§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞

–ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ç—Ä–æ–∫—É —Å JSON-–æ–±—ä–µ–∫—Ç–æ–º, —Å–æ–¥–µ—Ä–∂–∞—â–∏–º –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∫–æ–º–∞–Ω–¥—É –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:

```json
{
  "login": "admin",
  "command": "ls /"
}
```

---

## üì§ –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞

### –£—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:

```json
{
  "code": 0,
  "result": "bin
boot
dev
etc
home
..."
}
```

### –û—à–∏–±–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω):

```json
{
  "code": 1,
  "result": "–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω"
}
```

---

## üßæ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–µ—Ä–≤–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `mysyslog` –¥–ª—è –∑–∞–ø–∏—Å–∏ –ª–æ–≥–æ–≤:

- –£—Å–ø–µ—à–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã ‚Äî –≤ `/tmp/myRPC_XXXXXX.stdout`
- –û—à–∏–±–∫–∏ –∏ –æ—Ç–∫–∞–∑—ã ‚Äî –≤ `/tmp/myRPC_XXXXXX.stderr`

---

## üìÅ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### `myRPC.conf`

```ini
port = 4040
socket_type = stream
```

### `users.conf`

```text
admin
devuser
tester
```

–û–±–∞ —Ñ–∞–π–ª–∞ –¥–æ–ª–∂–Ω—ã –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ `/etc/myRPC/`. –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: –ø–æ—Ä—Ç `25565`, —Ç–∏–ø —Å–æ–∫–µ—Ç–∞ `stream`.

---

## üîß –°–±–æ—Ä–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞

–°–±–æ—Ä–∫–∞ —á–µ—Ä–µ–∑ `make`:

```bash
cd myRPC/
make myRPC-server
```

–£—Å—Ç–∞–Ω–æ–≤–∫–∞:

```bash
sudo cp -f bin/myRPC-server /usr/local/bin/myRPC-server
```

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ systemd —Å–µ—Ä–≤–∏—Å–∞ –æ–ø–∏—Å–∞–Ω–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ ([README-config.md](./README-config.md)).

---

## üöÄ –ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞ –≤—Ä—É—á–Ω—É—é

–ï—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è systemd, –º–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞–ø—Ä—è–º—É—é:

```bash
./bin/myRPC-server -p 4040 -s
```

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:

- `-p` ‚Äî –ø–æ—Ä—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, `4040`)
- `-s` ‚Äî TCP (stream)
- `-d` ‚Äî UDP (dgram)

---

> `myRPC-server` –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –∏ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –∑–∞–∫—Ä—ã—Ç—ã—Ö —Å–µ—Ç—è—Ö –∏–ª–∏ –≤ —Ü–µ–ª—è—Ö –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏.
