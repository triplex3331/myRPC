# myRPC UNIX ‚Äî —Å–∏—Å—Ç–µ–º–∞ —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥

–ü—Ä–æ–µ–∫—Ç **myRPC** –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –¥–µ–º–æ–Ω `myRPC-server`, –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é —É—Ç–∏–ª–∏—Ç—É `myRPC-client`, —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è `mysyslog`, –∞ —Ç–∞–∫–∂–µ –Ω–∞–±–æ—Ä Bash-—Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è —Å–±–æ—Ä–∫–∏ `.deb`-–ø–∞–∫–µ—Ç–æ–≤ –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è. –ö–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω—É–∂–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å —Å–µ—Ä–≤–µ—Ä–æ–º.

---

## üß© –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞

### myRPC-client ‚Äî –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è —É—Ç–∏–ª–∏—Ç–∞

–ü–æ–∑–≤–æ–ª—è–µ—Ç —É–∫–∞–∑–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (IP, –ø–æ—Ä—Ç, —Ç–∏–ø —Å–æ–∫–µ—Ç–∞) –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É —Å–µ—Ä–≤–µ—Ä—É. –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ. –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ ‚Äî —Å–ø—Ä–∞–≤–∫–∞.

### myRPC-server ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å

–ß–∏—Ç–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ `/etc/myRPC/myRPC.conf` (–ø–æ—Ä—Ç, —Ç–∏–ø —Å–æ–∫–µ—Ç–∞), –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã, –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –µ–≥–æ –≤ `/etc/myRPC/users.conf`, –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –∏ –ª–æ–≥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —á–µ—Ä–µ–∑ `mysyslog`.

### mysyslog ‚Äî –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

–ü–∏—à–µ—Ç –∂—É—Ä–Ω–∞–ª—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:

- –£—Å–ø–µ—à–Ω–æ: `/tmp/myRPC_XXXXXX.stdout`
- –û—à–∏–±–∫–∏: `/tmp/myRPC_XXXXXX.stderr`

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### `myRPC.conf`

```ini
port = 4040
socket_type = stream
```

–ï—Å–ª–∏ —Ñ–∞–π–ª –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: –ø–æ—Ä—Ç `25565`, —Ç–∏–ø —Å–æ–∫–µ—Ç–∞ `stream`.

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```bash
sudo mkdir -p /etc/myRPC
sudo cp -f src/config/myRPC.conf /etc/myRPC/
```

### `users.conf`

```text
username1
username2
...
```

–ï—Å–ª–∏ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —ç—Ç–æ–º —Å–ø–∏—Å–∫–µ ‚Äî —Å–µ—Ä–≤–µ—Ä –æ—Ç–∫–ª–æ–Ω–∏—Ç –∑–∞–ø—Ä–æ—Å.

```bash
sudo cp -f src/config/users.conf /etc/myRPC/
```

---

## üîß –°–±–æ—Ä–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- `gcc`
- `make`
- `fakeroot`
- `python3`
- `git`

### –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <URL>

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd myRPC

# –°–±–æ—Ä–∫–∞ –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤
make all

# –°–±–æ—Ä–∫–∞ .deb –ø–∞–∫–µ—Ç–æ–≤
make deb

# –°–æ–∑–¥–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
make repo

# –û–±—â–∞—è —Å–±–æ—Ä–∫–∞ —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ mysyslog
make repository
```

---

## üåê –°–µ—Ç–µ–≤–æ–π deb-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ HTTP-—Å–µ—Ä–≤–µ—Ä–∞:

```bash
cd repo
python3 -m http.server 8000
```

–ù–∞ –∫–ª–∏–µ–Ω—Ç–µ:

```bash
echo "deb [trusted=yes] http://<IP-—Å–µ—Ä–≤–µ—Ä–∞>:8000 ./" | sudo tee /etc/apt/sources.list.d/myrpc.list
sudo apt update
sudo apt install myRPC-client myRPC-server mysyslog
```

–¢–∞–∫–∂–µ –¥–æ—Å—Ç—É–ø–Ω–æ –≤—Ä—É—á–Ω—É—é:

```
http://localhost:8000/Packages.gz
```

---

## üöÄ –ó–∞–ø—É—Å–∫

### –°–µ—Ä–≤–µ—Ä

–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `systemd`:

```bash
systemctl status myRPC-server
systemctl daemon-reload
systemctl restart myRPC-server
```

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```bash
sudo systemctl restart myRPC-server
```

### –ö–ª–∏–µ–Ω—Ç

–ó–∞–ø—É—Å–∫ –∏–∑ –ø–∞–ø–∫–∏ `bin`:

```bash
./bin/myRPC-client -c "<–∫–æ–º–∞–Ω–¥–∞>" -h <IP> -p <–ø–æ—Ä—Ç> -d
```

–ò–ª–∏, –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω .deb:

```bash
myRPC-client -c "<–∫–æ–º–∞–Ω–¥–∞>" -h <IP> -p <–ø–æ—Ä—Ç> -d
```

#### –ê—Ä–≥—É–º–µ–Ω—Ç—ã:

- `-c` ‚Äî –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- `-h` ‚Äî –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞
- `-p` ‚Äî –ø–æ—Ä—Ç
- `-d` ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å UDP
- `-s` ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TCP (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

#### –ü—Ä–∏–º–µ—Ä:

```bash
myRPC-client -c "echo Hello from client" -h 127.0.0.1 -p 4040 -d
```

---

## üßº –û—á–∏—Å—Ç–∫–∞

–£–¥–∞–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:

```bash
make clean
```

---

## üì¶ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- –ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `.conf`-—Ñ–∞–π–ª—ã.
- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∏ –¥–ª—è —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö .deb –ø–∞–∫–µ—Ç–æ–≤.

---

> –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–ª—è UNIX-—Å–∏—Å—Ç–µ–º. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –Ω–∞ C.
